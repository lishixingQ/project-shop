{"version":3,"file":"js/482.0b1e1b70.js","mappings":"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","sources":["webpack://project-shop/./src/components/power/Roles.vue","webpack://project-shop/src/components/power/Roles.vue","webpack://project-shop/./src/components/power/Roles.vue?fd0e","webpack://project-shop/./src/components/power/Roles.vue?a0df"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('el-breadcrumb',{attrs:{\"separator-class\":\"el-icon-arrow-right\"}},[_c('el-breadcrumb-item',{attrs:{\"to\":{ path: '/home' }}},[_vm._v(\"首页\")]),_c('el-breadcrumb-item',[_vm._v(\"角色管理\")]),_c('el-breadcrumb-item',[_vm._v(\"角色列表\")])],1),_c('el-card',{staticClass:\"box-card\"},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.addRole}},[_vm._v(\"添加角色\")]),[_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.rolesListData,\"border\":\"\",\"stripe\":\"\"}},[_c('el-table-column',{attrs:{\"type\":\"expand\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return _vm._l((scope.row.children),function(item1,index1){return _c('el-row',{key:item1.id,class:['bborder', index1 === 0 ? 'tborder' : '', 'vdisflex']},[_c('el-col',{attrs:{\"span\":5}},[_c('el-tag',{attrs:{\"closable\":\"\"},on:{\"close\":function($event){return _vm.deleteRight(scope.row, item1.id)}}},[_vm._v(_vm._s(item1.authName))]),_c('i',{staticClass:\"el-icon-caret-right\"})],1),_c('el-col',{attrs:{\"span\":19}},_vm._l((item1.children),function(item2,index2){return _c('el-row',{key:item2.id,class:[index2 === 0 ? '' : 'tborder', 'vdisflex']},[_c('el-col',{attrs:{\"span\":6}},[_c('el-tag',{attrs:{\"type\":\"success\",\"closable\":\"\"},on:{\"close\":function($event){return _vm.deleteRight(scope.row, item2.id)}}},[_vm._v(\" \"+_vm._s(item2.authName)+\" \")]),_c('i',{staticClass:\"el-icon-caret-right\"})],1),_c('el-col',{attrs:{\"span\":13}},_vm._l((item2.children),function(item3){return _c('el-tag',{key:item3.id,attrs:{\"type\":\"warning\",\"closable\":\"\"},on:{\"close\":function($event){return _vm.deleteRight(scope.row, item3.id)}}},[_vm._v(\" \"+_vm._s(item3.authName)+\" \")])}),1)],1)}),1)],1)})}}])}),_c('el-table-column',{attrs:{\"type\":\"index\"}}),_c('el-table-column',{attrs:{\"prop\":\"roleName\",\"label\":\"角色名称\"}}),_c('el-table-column',{attrs:{\"prop\":\"roleDesc\",\"label\":\"角色描述\"}}),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"300px\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-edit\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.changeRole(scope.row.id)}}},[_vm._v(\"编辑\")]),_c('el-button',{attrs:{\"type\":\"danger\",\"icon\":\"el-icon-delete\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.deleteRole(scope.row.id)}}},[_vm._v(\"删除\")]),_c('el-button',{attrs:{\"type\":\"warning\",\"icon\":\"el-icon-search\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.setRights(scope.row)}}},[_vm._v(\"分配权限\")])]}}])})],1)]],2),_c('el-dialog',{attrs:{\"title\":\"添加角色\",\"visible\":_vm.addRoleDialog,\"width\":\"30%\"},on:{\"update:visible\":function($event){_vm.addRoleDialog=$event}}},[_c('el-form',{ref:\"addRolesFormRef\",attrs:{\"model\":_vm.addRolesForm,\"label-width\":\"80px\"}},[_c('el-form-item',{attrs:{\"label\":\"角色名称\"}},[_c('el-input',{model:{value:(_vm.addRolesForm.roleName),callback:function ($$v) {_vm.$set(_vm.addRolesForm, \"roleName\", $$v)},expression:\"addRolesForm.roleName\"}})],1),_c('el-form-item',{attrs:{\"label\":\"角色描述\"}},[_c('el-input',{model:{value:(_vm.addRolesForm.roleDesc),callback:function ($$v) {_vm.$set(_vm.addRolesForm, \"roleDesc\", $$v)},expression:\"addRolesForm.roleDesc\"}})],1)],1),_c('span',{attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.addRoleDialog = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.confirmAddRoles}},[_vm._v(\"确 定\")])],1)],1),_c('el-dialog',{attrs:{\"title\":\"修改角色\",\"visible\":_vm.changeRoleDialog,\"width\":\"30%\"},on:{\"update:visible\":function($event){_vm.changeRoleDialog=$event}}},[_c('el-form',{ref:\"changeRolesFormRef\",attrs:{\"model\":_vm.changeRolesForm,\"label-width\":\"80px\"}},[_c('el-form-item',{attrs:{\"label\":\"角色名称\"}},[_c('el-input',{model:{value:(_vm.changeRolesForm.roleName),callback:function ($$v) {_vm.$set(_vm.changeRolesForm, \"roleName\", $$v)},expression:\"changeRolesForm.roleName\"}})],1),_c('el-form-item',{attrs:{\"label\":\"角色描述\"}},[_c('el-input',{model:{value:(_vm.changeRolesForm.roleDesc),callback:function ($$v) {_vm.$set(_vm.changeRolesForm, \"roleDesc\", $$v)},expression:\"changeRolesForm.roleDesc\"}})],1)],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.changeRoleDialog = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.confirmChangeRoles}},[_vm._v(\"确 定\")])],1)],1),_c('el-dialog',{attrs:{\"title\":\"分配权限\",\"visible\":_vm.setRightsDialog,\"width\":\"50%\"},on:{\"update:visible\":function($event){_vm.setRightsDialog=$event},\"close\":_vm.setRightsDialogClosed}},[_c('el-tree',{ref:\"treeRef\",attrs:{\"data\":_vm.allRightsTree,\"props\":_vm.allRightsTreeProps,\"show-checkbox\":\"\",\"default-expand-all\":\"\",\"node-key\":\"id\",\"default-checked-keys\":_vm.defKeys}}),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.setRightsDialog = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.confirmSetRights}},[_vm._v(\"确 定\")])],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div>\r\n        <!-- 角色列表面包屑 -->\r\n        <el-breadcrumb separator-class=\"el-icon-arrow-right\">\r\n            <el-breadcrumb-item :to=\"{ path: '/home' }\">首页</el-breadcrumb-item>\r\n            <el-breadcrumb-item>角色管理</el-breadcrumb-item>\r\n            <el-breadcrumb-item>角色列表</el-breadcrumb-item>\r\n        </el-breadcrumb>\r\n\r\n        <!-- 角色列表内容区域 -->\r\n        <el-card class=\"box-card\">\r\n            <!-- 添加用户按钮 -->\r\n            <el-button type=\"primary\" @click=\"addRole\">添加角色</el-button>\r\n\r\n            <!-- 角色列表数据渲染 -->\r\n            <template>\r\n                <el-table :data=\"rolesListData\" style=\"width: 100%\" border stripe>\r\n                    <el-table-column type=\"expand\">\r\n                        <template slot-scope=\"scope\">\r\n                            <el-row :class=\"['bborder', index1 === 0 ? 'tborder' : '', 'vdisflex']\"\r\n                                v-for=\"(item1, index1) in scope.row.children\" :key=\"item1.id\">\r\n                                <el-col :span=\"5\">\r\n                                    <el-tag @close=\"deleteRight(scope.row, item1.id)\" closable>{{ item1.authName }}</el-tag>\r\n                                    <i class=\"el-icon-caret-right\"></i>\r\n                                </el-col>\r\n                                <el-col :span=\"19\">\r\n                                    <el-row :class=\"[index2 === 0 ? '' : 'tborder', 'vdisflex']\"\r\n                                        v-for=\"(item2, index2) in item1.children\" :key=\"item2.id\">\r\n                                        <el-col :span=\"6\">\r\n                                            <el-tag type=\"success\" @close=\"deleteRight(scope.row, item2.id)\" closable>\r\n                                                {{ item2.authName }}\r\n                                            </el-tag>\r\n                                            <i class=\"el-icon-caret-right\"></i>\r\n                                        </el-col>\r\n                                        <el-col :span=\"13\">\r\n                                            <el-tag type=\"warning\" v-for=\"item3 in item2.children\" :key=\"item3.id\" closable\r\n                                                @close=\"deleteRight(scope.row, item3.id)\">\r\n                                                {{ item3.authName }}\r\n                                            </el-tag>\r\n                                        </el-col>\r\n                                    </el-row>\r\n                                </el-col>\r\n                            </el-row>\r\n                            <!-- <pre>\r\n                                {{ scope.row }}\r\n                            </pre> -->\r\n                        </template>\r\n                    </el-table-column>\r\n                    <el-table-column type=\"index\"></el-table-column>\r\n                    <el-table-column prop=\"roleName\" label=\"角色名称\">\r\n                    </el-table-column>\r\n                    <el-table-column prop=\"roleDesc\" label=\"角色描述\">\r\n                    </el-table-column>\r\n                    <el-table-column label=\"操作\" width=\"300px\">\r\n                        <template slot-scope=\"scope\">\r\n                            <el-button type=\"primary\" icon=\"el-icon-edit\" size=\"mini\"\r\n                                @click=\"changeRole(scope.row.id)\">编辑</el-button>\r\n                            <el-button type=\"danger\" icon=\"el-icon-delete\" size=\"mini\"\r\n                                @click=\"deleteRole(scope.row.id)\">删除</el-button>\r\n                            <el-button type=\"warning\" icon=\"el-icon-search\" size=\"mini\"\r\n                                @click=\"setRights(scope.row)\">分配权限</el-button>\r\n                        </template>\r\n                    </el-table-column>\r\n                </el-table>\r\n            </template>\r\n        </el-card>\r\n\r\n\r\n        <!-- 添加角色对话框 -->\r\n        <el-dialog title=\"添加角色\" :visible.sync=\"addRoleDialog\" width=\"30%\">\r\n            <el-form ref=\"addRolesFormRef\" :model=\"addRolesForm\" label-width=\"80px\">\r\n                <el-form-item label=\"角色名称\">\r\n                    <el-input v-model=\"addRolesForm.roleName\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"角色描述\">\r\n                    <el-input v-model=\"addRolesForm.roleDesc\"></el-input>\r\n                </el-form-item>\r\n            </el-form>\r\n            <span slot=\"footer\">\r\n                <el-button @click=\"addRoleDialog = false\">取 消</el-button>\r\n                <el-button type=\"primary\" @click=\"confirmAddRoles\">确 定</el-button>\r\n            </span>\r\n        </el-dialog>\r\n\r\n        <!-- 编辑角色对话框 -->\r\n        <el-dialog title=\"修改角色\" :visible.sync=\"changeRoleDialog\" width=\"30%\">\r\n            <el-form ref=\"changeRolesFormRef\" :model=\"changeRolesForm\" label-width=\"80px\">\r\n                <el-form-item label=\"角色名称\">\r\n                    <el-input v-model=\"changeRolesForm.roleName\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"角色描述\">\r\n                    <el-input v-model=\"changeRolesForm.roleDesc\"></el-input>\r\n                </el-form-item>\r\n            </el-form>\r\n            <span slot=\"footer\" class=\"dialog-footer\">\r\n                <el-button @click=\"changeRoleDialog = false\">取 消</el-button>\r\n                <el-button type=\"primary\" @click=\"confirmChangeRoles\">确 定</el-button>\r\n            </span>\r\n        </el-dialog>\r\n\r\n        <!-- 分配权限对话框 -->\r\n        <el-dialog title=\"分配权限\" :visible.sync=\"setRightsDialog\" width=\"50%\" @close=\"setRightsDialogClosed\">\r\n            <el-tree :data=\"allRightsTree\" :props=\"allRightsTreeProps\" show-checkbox default-expand-all node-key=\"id\"\r\n                :default-checked-keys=\"defKeys\" ref=\"treeRef\"></el-tree>\r\n            <span slot=\"footer\" class=\"dialog-footer\">\r\n                <el-button @click=\"setRightsDialog = false\">取 消</el-button>\r\n                <el-button type=\"primary\" @click=\"confirmSetRights\">确 定</el-button>\r\n            </span>\r\n        </el-dialog>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    props: {\r\n\r\n    },\r\n    data() {\r\n        return {\r\n            // 角色列表数据\r\n            rolesListData: [],\r\n            // 添加角色对话框的显示与隐藏\r\n            addRoleDialog: false,\r\n            // 添加角色表单数据\r\n            addRolesForm: {\r\n                // 角色名称\r\n                roleName: '',\r\n                // 角色描述\r\n                roleDesc: ''\r\n            },\r\n            // 修改用户对话框显示与隐藏\r\n            changeRoleDialog: false,\r\n            // 修改用户表单数据\r\n            changeRolesForm: {},\r\n            // 分配权限对话框的显示与隐藏\r\n            setRightsDialog: false,\r\n            // 所有权限树形列表\r\n            allRightsTree: [],\r\n            // 树形控件分配\r\n            allRightsTreeProps: {\r\n                label: 'authName',\r\n                children: 'children'\r\n            },\r\n            // 默认勾选权限显示的数组\r\n            defKeys: [],\r\n            // 树形控件中权限的id\r\n            roleId: ''\r\n        };\r\n    },\r\n    methods: {\r\n        // 请求角色列表数据\r\n        async getRolesListData() {\r\n            const { data: result } = await this.$axios.get('roles')\r\n            // console.log(result);\r\n            if (result.meta.status == 200) {\r\n                this.rolesListData = result.data\r\n                // console.log(this.rolesListData);\r\n            } else {\r\n                this.$message.error('获取角色列表失败！')\r\n            }\r\n        },\r\n        // 添加角色对话框显示\r\n        addRole() {\r\n            this.addRoleDialog = true\r\n        },\r\n        // 确定添加角色向后台添加角色数据\r\n        async confirmAddRoles() {\r\n            const { data: result } = await this.$axios.post('roles', this.addRolesForm)\r\n            // console.log(result);\r\n            if (result.meta.status == 201) {\r\n                this.$message.success('添加角色成功!')\r\n            } else {\r\n                this.$message.error('添加角色失败!')\r\n            }\r\n            this.getRolesListData()\r\n            this.addRoleDialog = false\r\n        },\r\n        // 通过id获取角色信息\r\n        async changeRole(id) {\r\n            // console.log(id);\r\n            const { data: result } = await this.$axios.get(`roles/${id}`)\r\n            // console.log(result);\r\n            if (result.meta.status == 200) {\r\n                this.$message.success('获取角色成功!')\r\n                this.changeRolesForm = result.data\r\n                this.changeRoleDialog = true\r\n            } else {\r\n                this.$message.error('获取角色失败!')\r\n            }\r\n        },\r\n        // 确认提交修改角色\r\n        async confirmChangeRoles() {\r\n            // console.log(this.changeRolesForm);\r\n            const { data: result } = await this.$axios.put(`roles/${this.changeRolesForm.roleId}`, {\r\n                roleName: this.changeRolesForm.roleName,\r\n                roleDesc: this.changeRolesForm.roleDesc\r\n            })\r\n            if (result.meta.status == 200) {\r\n                this.$message.success('修改用户信息成功!')\r\n                this.getRolesListData()\r\n            } else {\r\n                this.$message.error('修改用户信息失败!')\r\n            }\r\n\r\n            this.changeRoleDialog = false\r\n        },\r\n        // 删除角色\r\n        async deleteRole(id) {\r\n            const deleteRoleResult = await this.$confirm('此操作将永久删除该角色, 是否继续?', '提示', {\r\n                confirmButtonText: '确定',\r\n                cancelButtonText: '取消',\r\n                type: 'warning'\r\n            }).catch(err => err)\r\n            // console.log(deleteRoleResult);\r\n            //  点取消 返回cancel\r\n            //  点确认 返回confirm\r\n            if (deleteRoleResult == 'confirm') {\r\n                const { data: result } = await this.$axios.delete(`roles/${id}`)\r\n                // console.log(result);\r\n                if (result.meta.status == 200) {\r\n                    this.$message.success('删除用户成功!')\r\n                    this.getRolesListData()\r\n                } else {\r\n                    this.$message.error('删除用户失败!')\r\n                }\r\n            }\r\n            if (deleteRoleResult == 'cancel') {\r\n                this.$message('已取消删除角色!');\r\n            }\r\n        },\r\n        // 删除权限\r\n        async deleteRight(role, rightId) {\r\n            const confirmResult = await this.$confirm('此操作将永久删除该权限, 是否继续?', '提示', {\r\n                confirmButtonText: '确定',\r\n                cancelButtonText: '取消',\r\n                type: 'warning'\r\n            }).catch(err => err)\r\n\r\n            if (confirmResult != 'confirm') {\r\n                return this.$message('已取消删除权限!')\r\n            }\r\n\r\n            const { data: result } = await this.$axios.delete(`roles/${role.id}/rights/${rightId}`)\r\n\r\n            if (result.meta.status != 200) {\r\n                return this.$message.error('删除权限失败!')\r\n            }\r\n            this.$message.success('删除权限成功!')\r\n            role.children = result.data\r\n        },\r\n        // 分配权限对话框显示\r\n        async setRights(role) {\r\n            this.roleId = role.id\r\n            console.log(role);\r\n            const { data: result } = await this.$axios.get('rights/tree')\r\n            if (result.meta.status != 200) {\r\n                return this.$message.error('获取权限列表失败！')\r\n            }\r\n            this.$message.success('获取权限列表成功！')\r\n            this.allRightsTree = result.data\r\n            // console.log(role);\r\n            this.getThirdListId(role, this.defKeys)\r\n            this.setRightsDialog = true\r\n        },\r\n        // 通过递归获取三级列表下的id，并保存到defKeys数组中\r\n        getThirdListId(node, arr) {\r\n\r\n            if (!node.children) {\r\n                //如果node节点中的查不到children 将节点的id存到arr数组中\r\n                return arr.push(node.id)\r\n            }\r\n            // console.log(node.children);\r\n            node.children.forEach(item =>\r\n                this.getThirdListId(item, arr))\r\n        },\r\n        // 关闭分配权限的对话框时\r\n        setRightsDialogClosed() {\r\n            this.defKeys = []\r\n        },\r\n        // 确定修改权限\r\n        async confirmSetRights() {\r\n            const Keys = [\r\n                ...this.$refs.treeRef.getCheckedKeys(),\r\n                ...this.$refs.treeRef.getHalfCheckedKeys()\r\n            ]\r\n\r\n            // console.log(Keys);\r\n            const idStr = Keys.join(',')\r\n            const { data: result } = await this.$axios.post(`roles/${this.roleId}/rights`, { rids: idStr })\r\n            // console.log(result);\r\n            if (result.meta.status != 200) {\r\n                return this.$message.error('更新权限失败！')\r\n            }\r\n\r\n            this.$message.success('更新权限成功！')\r\n            this.getRolesListData()\r\n            this.setRightsDialog = false\r\n        }\r\n    },\r\n    mounted() {\r\n        this.getRolesListData()\r\n    },\r\n    components: {\r\n\r\n    },\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n.el-tag {\r\n    margin: 7px;\r\n}\r\n\r\n.bborder {\r\n    border-bottom: 1px solid #eee;\r\n    margin: 0 50px;\r\n}\r\n\r\n.tborder {\r\n    border-top: 1px solid #eee;\r\n}\r\n\r\n.vdisflex {\r\n    display: flex;\r\n    align-items: center;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Roles.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Roles.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Roles.vue?vue&type=template&id=c0c1a1a2&scoped=true&\"\nimport script from \"./Roles.vue?vue&type=script&lang=js&\"\nexport * from \"./Roles.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Roles.vue?vue&type=style&index=0&id=c0c1a1a2&prod&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"c0c1a1a2\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","attrs","path","_v","staticClass","on","addRole","staticStyle","rolesListData","scopedSlots","_u","key","fn","scope","_l","row","children","item1","index1","id","class","$event","deleteRight","_s","authName","item2","index2","item3","changeRole","deleteRole","setRights","addRoleDialog","ref","addRolesForm","model","value","roleName","callback","$$v","$set","expression","roleDesc","slot","confirmAddRoles","changeRoleDialog","changeRolesForm","confirmChangeRoles","setRightsDialog","setRightsDialogClosed","allRightsTree","allRightsTreeProps","defKeys","confirmSetRights","staticRenderFns","props","data","label","roleId","methods","result","$axios","get","meta","status","$message","error","post","success","getRolesListData","put","deleteRoleResult","$confirm","confirmButtonText","cancelButtonText","type","catch","err","delete","role","rightId","confirmResult","console","log","getThirdListId","node","arr","push","forEach","item","Keys","$refs","treeRef","getCheckedKeys","getHalfCheckedKeys","idStr","join","rids","mounted","components","component"],"sourceRoot":""}