{"version":3,"file":"js/890.125711f4.js","mappings":"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","sources":["webpack://project-shop/./src/components/goods/Add.vue","webpack://project-shop/src/components/goods/Add.vue","webpack://project-shop/./src/components/goods/Add.vue?66df","webpack://project-shop/./src/components/goods/Add.vue?e325"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('el-breadcrumb',{attrs:{\"separator-class\":\"el-icon-arrow-right\"}},[_c('el-breadcrumb-item',{attrs:{\"to\":{ path: '/home' }}},[_vm._v(\"首页\")]),_c('el-breadcrumb-item',[_vm._v(\"商品管理\")]),_c('el-breadcrumb-item',[_vm._v(\"添加商品\")])],1),_c('el-card',[_c('el-alert',{attrs:{\"title\":\"添加商品信息\",\"type\":\"info\",\"show-icon\":\"\",\"center\":\"\",\"closable\":false}}),_c('el-steps',{attrs:{\"space\":200,\"active\":_vm.activeIndex - 0,\"finish-status\":\"success\",\"align-center\":\"\"}},[_c('el-step',{attrs:{\"title\":\"基本信息\"}}),_c('el-step',{attrs:{\"title\":\"商品参数\"}}),_c('el-step',{attrs:{\"title\":\"商品属性\"}}),_c('el-step',{attrs:{\"title\":\"商品图片\"}}),_c('el-step',{attrs:{\"title\":\"商品内容\"}}),_c('el-step',{attrs:{\"title\":\"完成\"}})],1),_c('el-form',{ref:\"addShopRef\",attrs:{\"model\":_vm.addShopForm,\"rules\":_vm.addShopRules,\"label-position\":\"top\"}},[_c('el-tabs',{attrs:{\"tab-position\":\"left\",\"before-leave\":_vm.tabsBeforeLeave},on:{\"tab-click\":function($event){return _vm.tabshandleChange(_vm.activeIndex)}},model:{value:(_vm.activeIndex),callback:function ($$v) {_vm.activeIndex=$$v},expression:\"activeIndex\"}},[_c('el-tab-pane',{attrs:{\"label\":\"基本信息\",\"name\":\"0\"}},[_c('el-form-item',{attrs:{\"label\":\"商品名称\",\"prop\":\"goods_name\"}},[_c('el-input',{model:{value:(_vm.addShopForm.goods_name),callback:function ($$v) {_vm.$set(_vm.addShopForm, \"goods_name\", $$v)},expression:\"addShopForm.goods_name\"}})],1),_c('el-form-item',{attrs:{\"label\":\"商品价格\",\"prop\":\"goods_price\"}},[_c('el-input',{attrs:{\"type\":\"number\"},model:{value:(_vm.addShopForm.goods_price),callback:function ($$v) {_vm.$set(_vm.addShopForm, \"goods_price\", $$v)},expression:\"addShopForm.goods_price\"}})],1),_c('el-form-item',{attrs:{\"label\":\"商品数量\",\"prop\":\"goods_number\"}},[_c('el-input',{attrs:{\"type\":\"number\"},model:{value:(_vm.addShopForm.goods_number),callback:function ($$v) {_vm.$set(_vm.addShopForm, \"goods_number\", $$v)},expression:\"addShopForm.goods_number\"}})],1),_c('el-form-item',{attrs:{\"label\":\"商品重量\",\"prop\":\"goods_weight\"}},[_c('el-input',{attrs:{\"type\":\"number\"},model:{value:(_vm.addShopForm.goods_weight),callback:function ($$v) {_vm.$set(_vm.addShopForm, \"goods_weight\", $$v)},expression:\"addShopForm.goods_weight\"}})],1),_c('el-form-item',{attrs:{\"label\":\"商品分类\",\"prop\":\"goods_cat\"}},[_c('el-cascader',{attrs:{\"options\":_vm.shopClassData,\"props\":_vm.shopClassProps,\"clearable\":\"\"},on:{\"change\":_vm.handleChange},model:{value:(_vm.addShopForm.goods_cat),callback:function ($$v) {_vm.$set(_vm.addShopForm, \"goods_cat\", $$v)},expression:\"addShopForm.goods_cat\"}})],1)],1),_c('el-tab-pane',{attrs:{\"label\":\"商品参数\",\"name\":\"1\"}},_vm._l((_vm.manyParamsList),function(item,index){return _c('el-form-item',{key:item.attr_id,attrs:{\"label\":item.attr_name}},[_c('el-checkbox-group',{model:{value:(item.attr_vals),callback:function ($$v) {_vm.$set(item, \"attr_vals\", $$v)},expression:\"item.attr_vals\"}},_vm._l((item.attr_vals),function(item1,index1){return _c('el-checkbox',{key:index1,attrs:{\"label\":item1,\"border\":\"\"}})}),1)],1)}),1),_c('el-tab-pane',{attrs:{\"label\":\"商品属性\",\"name\":\"2\"}},_vm._l((_vm.onlyParamsList),function(item2){return _c('el-form-item',{key:item2.attr_id,attrs:{\"label\":item2.attr_name}},[_c('el-input',{model:{value:(item2.attr_vals),callback:function ($$v) {_vm.$set(item2, \"attr_vals\", $$v)},expression:\"item2.attr_vals\"}})],1)}),1),_c('el-tab-pane',{attrs:{\"label\":\"商品图片\",\"name\":\"3\"}},[_c('el-upload',{attrs:{\"action\":_vm.uploadUrl,\"on-preview\":_vm.handlePreview,\"on-remove\":_vm.handleRemove,\"on-success\":_vm.handleSuccess,\"list-type\":\"picture\",\"headers\":_vm.headerObj}},[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"}},[_vm._v(\"点击上传\")])],1)],1),_c('el-tab-pane',{attrs:{\"label\":\"商品内容\",\"name\":\"4\"}},[_c('quill-editor',{model:{value:(_vm.addShopForm.goods_introduce),callback:function ($$v) {_vm.$set(_vm.addShopForm, \"goods_introduce\", $$v)},expression:\"addShopForm.goods_introduce\"}}),_c('el-button',{staticClass:\"addBtn\",attrs:{\"type\":\"primary\"},on:{\"click\":_vm.add}},[_vm._v(\"添加商品\")])],1)],1)],1)],1),_c('el-dialog',{attrs:{\"title\":\"图片预览\",\"visible\":_vm.previewDialog,\"width\":\"50%\"},on:{\"update:visible\":function($event){_vm.previewDialog=$event}}},[_c('img',{staticStyle:{\"width\":\"100%\"},attrs:{\"src\":_vm.previewUrl,\"alt\":\"\"}})])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div>\r\n        <el-breadcrumb separator-class=\"el-icon-arrow-right\">\r\n            <el-breadcrumb-item :to=\"{ path: '/home' }\">首页</el-breadcrumb-item>\r\n            <el-breadcrumb-item>商品管理</el-breadcrumb-item>\r\n            <el-breadcrumb-item>添加商品</el-breadcrumb-item>\r\n        </el-breadcrumb>\r\n\r\n        <el-card>\r\n            <!-- 提示区域 -->\r\n            <el-alert title=\"添加商品信息\" type=\"info\" show-icon center :closable=\"false\">\r\n            </el-alert>\r\n\r\n            <!-- 步骤区域 -->\r\n            <el-steps :space=\"200\" :active=\"activeIndex - 0\" finish-status=\"success\" align-center>\r\n                <el-step title=\"基本信息\"></el-step>\r\n                <el-step title=\"商品参数\"></el-step>\r\n                <el-step title=\"商品属性\"></el-step>\r\n                <el-step title=\"商品图片\"></el-step>\r\n                <el-step title=\"商品内容\"></el-step>\r\n                <el-step title=\"完成\"></el-step>\r\n            </el-steps>\r\n\r\n            <!-- 添加商品表单 -->\r\n            <el-form :model=\"addShopForm\" :rules=\"addShopRules\" ref=\"addShopRef\" label-position=\"top\">\r\n                <!-- 标签分页区域 -->\r\n                <el-tabs tab-position=\"left\" v-model=\"activeIndex\" :before-leave=\"tabsBeforeLeave\"\r\n                    @tab-click=\"tabshandleChange(activeIndex)\">\r\n                    <el-tab-pane label=\"基本信息\" name=\"0\">\r\n                        <!-- 基本信息表单验证区域 -->\r\n                        <!-- 商品名称 -->\r\n                        <el-form-item label=\"商品名称\" prop=\"goods_name\">\r\n                            <el-input v-model=\"addShopForm.goods_name\"></el-input>\r\n                        </el-form-item>\r\n                        <!-- 商品名称 -->\r\n                        <el-form-item label=\"商品价格\" prop=\"goods_price\">\r\n                            <el-input v-model=\"addShopForm.goods_price\" type=\"number\"></el-input>\r\n                        </el-form-item>\r\n                        <!-- 商品名称 -->\r\n                        <el-form-item label=\"商品数量\" prop=\"goods_number\">\r\n                            <el-input v-model=\"addShopForm.goods_number\" type=\"number\"></el-input>\r\n                        </el-form-item>\r\n                        <!-- 商品名称 -->\r\n                        <el-form-item label=\"商品重量\" prop=\"goods_weight\">\r\n                            <el-input v-model=\"addShopForm.goods_weight\" type=\"number\"></el-input>\r\n                        </el-form-item>\r\n                        <!-- 商品分类 -->\r\n                        <el-form-item label=\"商品分类\" prop=\"goods_cat\">\r\n                            <!-- 商品分类级联选择器 -->\r\n                            <el-cascader v-model=\"addShopForm.goods_cat\" :options=\"shopClassData\" :props=\"shopClassProps\"\r\n                                @change=\"handleChange\" clearable></el-cascader>\r\n                        </el-form-item>\r\n                    </el-tab-pane>\r\n                    <el-tab-pane label=\"商品参数\" name=\"1\">\r\n                        <el-form-item :label=\"item.attr_name\" v-for=\"(item, index) in manyParamsList\" :key=\"item.attr_id\">\r\n                            <el-checkbox-group v-model=\"item.attr_vals\">\r\n                                <el-checkbox :label=\"item1\" v-for=\"(item1, index1) in item.attr_vals\" :key=\"index1\"\r\n                                    border></el-checkbox>\r\n                            </el-checkbox-group>\r\n                        </el-form-item>\r\n                    </el-tab-pane>\r\n                    <el-tab-pane label=\"商品属性\" name=\"2\">\r\n                        <el-form-item :label=\"item2.attr_name\" v-for=\"item2 in onlyParamsList\" :key=\"item2.attr_id\">\r\n                            <el-input v-model=\"item2.attr_vals\"></el-input>\r\n                        </el-form-item>\r\n                    </el-tab-pane>\r\n                    <el-tab-pane label=\"商品图片\" name=\"3\">\r\n                        <!-- 图片上传 -->\r\n                        <el-upload :action=\"uploadUrl\" :on-preview=\"handlePreview\" :on-remove=\"handleRemove\"\r\n                            :on-success=\"handleSuccess\" list-type=\"picture\" :headers=\"headerObj\">\r\n                            <el-button size=\"small\" type=\"primary\">点击上传</el-button>\r\n                        </el-upload>\r\n                    </el-tab-pane>\r\n                    <el-tab-pane label=\"商品内容\" name=\"4\">\r\n                        <!-- 富文本编辑器 -->\r\n                        <quill-editor v-model=\"addShopForm.goods_introduce\">\r\n                        </quill-editor>\r\n\r\n                        <!-- 添加商品按钮 -->\r\n                        <el-button type=\"primary\" class=\"addBtn\" @click=\"add\">添加商品</el-button>\r\n                    </el-tab-pane>\r\n                </el-tabs>\r\n            </el-form>\r\n        </el-card>\r\n\r\n\r\n        <!-- 图片预览对话框 -->\r\n        <el-dialog title=\"图片预览\" :visible.sync=\"previewDialog\" width=\"50%\">\r\n            <img :src=\"previewUrl\" alt=\"\" style=\"width: 100%;\">\r\n        </el-dialog>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport _ from \"lodash\";\r\nexport default {\r\n    props: {\r\n\r\n    },\r\n    data() {\r\n        return {\r\n            // 选中的标签页索引\r\n            activeIndex: '0',\r\n            // 添加商品表单数据\r\n            addShopForm: {\r\n                goods_name: '',\r\n                goods_price: 0,\r\n                goods_number: 0,\r\n                goods_weight: 0,\r\n                // 级联选择器选中的id数组\r\n                goods_cat: [],\r\n                // 上传图片的临时路径\r\n                pics: [],\r\n                // 商品介绍\r\n                goods_introduce: '',\r\n                attrs: []\r\n            },\r\n            // 添加商品表单验证规则\r\n            addShopRules: {\r\n                // 商品名称验证规则\r\n                goods_name: [\r\n                    { required: true, message: '请输入商品名称', trigger: 'blur' },\r\n                ],\r\n                // 商品价格验证规则\r\n                goods_price: [\r\n                    { required: true, message: '请输入商品价格', trigger: 'blur' },\r\n                ],\r\n                // 商品名数量验证规则\r\n                goods_number: [\r\n                    { required: true, message: '请输入商品数量', trigger: 'blur' },\r\n                ],\r\n                // 商品重量验证规则\r\n                goods_weight: [\r\n                    { required: true, message: '请输入商品重量', trigger: 'blur' },\r\n                ],\r\n                goods_cat: [\r\n                    { required: true, message: '请选择商品分类', trigger: 'blur' },\r\n                ]\r\n            },\r\n            // 商品分类列表级联选择器数据源\r\n            shopClassData: [],\r\n            // 级联选择器配置项\r\n            shopClassProps: {\r\n                expandTrigger: 'hover',\r\n                value: 'cat_id',\r\n                label: 'cat_name',\r\n                children: 'children'\r\n            },\r\n            // 静态参数列表数据\r\n            manyParamsList: [],\r\n            // 动态属性列表数据\r\n            onlyParamsList: [],\r\n            // 上传图片的url地址\r\n            uploadUrl: 'http://www.chenfuguo.cn:8899/api/private/v1/upload',\r\n            // 上传图片请求头设置token\r\n            headerObj: {\r\n                Authorization: window.sessionStorage.getItem('token')\r\n            },\r\n            // 预览图片路径\r\n            previewUrl: '',\r\n            // 图片预览对话框的显示与隐藏\r\n            previewDialog: false,\r\n        }\r\n    },\r\n    methods: {\r\n        // 获取商品分类级联选择器数据\r\n        async getShopClassData() {\r\n\r\n            const { data: result } = await this.$axios.get('categories')\r\n            if (result.meta.status != 200) {\r\n                return this.$message.error('获取商品分类列表失败!')\r\n            }\r\n\r\n            this.shopClassData = result.data\r\n        },\r\n        // 级联选择器触发时调用函数\r\n        handleChange() {\r\n\r\n            if (this.addShopForm.goods_cat.length !== 3) {\r\n                this.addShopForm.goods_cat = []\r\n            }\r\n\r\n            return null\r\n        },\r\n        // tabs标签切换之前触发\r\n        tabsBeforeLeave(activeName, oldActiveName) {\r\n            // this.activeIndex = activeName\r\n            // console.log('去哪里' + activeName, '从哪来' + oldActiveName)\r\n            // return false\r\n            if (oldActiveName === '0' && this.addShopForm.goods_cat.length !== 3) {\r\n                this.$message.error('请先选择商品分类!')\r\n                return false\r\n            }\r\n        },\r\n        // 标签被选中时被触发\r\n        async tabshandleChange(activeIndex) {\r\n            if (activeIndex == 1) {\r\n                const { data: result } = await this.$axios.get(`categories/${this.paramsId}/attributes`, {\r\n                    params: { sel: 'many' }\r\n                })\r\n\r\n                // console.log(result);\r\n                if (result.meta.status != 200) {\r\n                    return this.$message.error('获取静态参数列表失败!')\r\n                }\r\n\r\n                result.data.forEach(item => {\r\n                    item.attr_vals = item.attr_vals.length !== 0 ? item.attr_vals.split(' ') : []\r\n                })\r\n\r\n                this.manyParamsList = result.data\r\n            }\r\n\r\n            if (activeIndex == 2) {\r\n                const { data: result } = await this.$axios.get(`categories/${this.paramsId}/attributes`, {\r\n                    params: { sel: 'only' }\r\n                })\r\n\r\n                // console.log(result);\r\n                if (result.meta.status != 200) {\r\n                    return this.$message.error('获取动态参数列表失败!')\r\n                }\r\n\r\n                // result.data.forEach(item => {\r\n                //     item.attr_vals = item.attr_vals.length !== 0 ? item.attr_vals.split(' ') : []\r\n                // })\r\n\r\n                this.onlyParamsList = result.data\r\n            }\r\n        },\r\n        // 处理图片预览的函数\r\n        handlePreview(file) {\r\n            console.log(file);\r\n            this.previewUrl = file.response.data.url\r\n            console.log(this.previewUrl);\r\n            this.previewDialog = true\r\n\r\n        },\r\n        // 处理图片删除的函数\r\n        handleRemove(file) {\r\n            // 要删除图片的临时路径\r\n            const filePath = file.response.data.tmp_path\r\n            // 在pic数组中查找要删除图片的索引\r\n            const index = this.addShopForm.pics.findIndex(item => {\r\n                return item.pic === filePath\r\n            })\r\n            // 调用数组方法splice删除图片路径\r\n            this.addShopForm.pics.splice(index, 1)\r\n            // console.log(this.addShopForm);\r\n        },\r\n        // 图片上传成功的回调\r\n        handleSuccess(response) {\r\n            // console.log(response);\r\n            const picInfo = { pic: response.data.tmp_path }\r\n            this.addShopForm.pics.push(picInfo)\r\n            // console.log(this.addShopForm.pics)\r\n        },\r\n        // 添加商品\r\n        add() {\r\n            this.$refs.addShopRef.validate(async valid => {\r\n                if (!valid) {\r\n                    return this.$message.error('请输入正确的表单项!')\r\n                }\r\n\r\n                //lodash深拷贝表单项\r\n                const form = _.cloneDeep(this.addShopForm)\r\n                form.goods_cat = form.goods_cat.join(',')\r\n\r\n                // 处理静态参数\r\n                // console.log(this.manyParamsList);\r\n                this.manyParamsList.forEach(item => {\r\n                    // console.log(item);\r\n                    const paramsInfo = {\r\n                        attr_id: item.attr_id,\r\n                        attr_value: item.attr_vals.join(' ')\r\n                    }\r\n                    this.addShopForm.attrs.push(paramsInfo)\r\n                })\r\n\r\n                // 处理动态属性\r\n                this.onlyParamsList.forEach(item => {\r\n                    const paramsInfo = {\r\n                        attr_id: item.attr_id,\r\n                        attr_value: item.attr_vals\r\n                    }\r\n                    this.addShopForm.attrs.push(paramsInfo)\r\n                })\r\n                form.attrs = this.addShopForm.attrs\r\n                // console.log(form);\r\n\r\n                const { data: result } = await this.$axios.post('goods', form)\r\n\r\n                // console.log(result);\r\n                if (result.meta.status != 201) {\r\n                    return this.$message.error('添加商品失败!')\r\n                }\r\n\r\n                this.$router.push('/goods')\r\n                this.$message.success('添加商品成功')\r\n            })\r\n        }\r\n    },\r\n    mounted() {\r\n        this.getShopClassData()\r\n    },\r\n    computed: {\r\n        paramsId() {\r\n            if (this.addShopForm.goods_cat.length === 3) {\r\n                return this.addShopForm.goods_cat[2]\r\n            }\r\n        }\r\n    },\r\n    components: {\r\n\r\n    },\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n.el-checkbox {\r\n    margin: 0 5px !important;\r\n}\r\n\r\n.addBtn {\r\n    margin-top: 15px\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Add.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Add.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Add.vue?vue&type=template&id=f7277938&scoped=true&\"\nimport script from \"./Add.vue?vue&type=script&lang=js&\"\nexport * from \"./Add.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Add.vue?vue&type=style&index=0&id=f7277938&prod&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"f7277938\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","attrs","path","_v","activeIndex","ref","addShopForm","addShopRules","tabsBeforeLeave","on","$event","tabshandleChange","model","value","callback","$$v","expression","goods_name","$set","goods_price","goods_number","goods_weight","shopClassData","shopClassProps","handleChange","goods_cat","_l","manyParamsList","item","index","key","attr_id","attr_name","attr_vals","item1","index1","onlyParamsList","item2","uploadUrl","handlePreview","handleRemove","handleSuccess","headerObj","goods_introduce","staticClass","add","previewDialog","staticStyle","previewUrl","staticRenderFns","props","data","pics","required","message","trigger","expandTrigger","label","children","Authorization","window","sessionStorage","getItem","methods","result","$axios","get","meta","status","$message","error","length","activeName","oldActiveName","paramsId","params","sel","forEach","split","file","console","log","response","url","filePath","tmp_path","findIndex","pic","splice","picInfo","push","$refs","addShopRef","validate","valid","form","_","join","paramsInfo","attr_value","post","$router","success","mounted","getShopClassData","computed","components","component"],"sourceRoot":""}